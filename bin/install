#!/usr/bin/env bash

if ! type stow 1>/dev/null 2>/dev/null; then
	echo >&2 "Stow is required. Please install and re-run"
	exit 1
fi

echo "Ensure you install xclip xdotool zenity"

sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"

if ! type node 1>/dev/null 2>/dev/null; then
	echo >&2 "To install node dependencies, ensure you have node installed."
else
	echo -n "Would you like to install node dependencies? (y/n): "
	read node

	if [ "$node" = "y" ]; then
		npm install
		npm install -g hyperlayout hpm-cli
		npm install -g mancy
		npm install -g lana-cli
		npm install -g bit-bin
		hpm install hyperlayout
		hpm install hyper-startup
	fi

fi

gsettings set org.gnome.gnome-screenshot auto-save-directory "file:///home/$USER/Uploads/"
echo "export \$UPLOAD_API_KEY" > ~/.env_vars
echo "Add your api key to ~/.env_vars"